!function(e){var t={kendo:"kendo",bootstrap:"bootstrap",none:"none"},n={addItem:function(t,i){t.preventDefault(),e(t).prop("disabled",!0);var a=n.getNewIndex(i.list,i.itemSelector),d=n.getNewItemPrefix(i.htmlFieldPrefix,i.property,a),o="function"==typeof i.newItemUrl?i.newItemUrl():i.newItemUrl;o.indexOf("?")<0&&(o+="?"),e.get(o+"&htmlFieldPrefix="+d,function(t){if("table"===i.listType)i.list.find("tbody").append(t),i.list.find(i.itemSelector+":last").append("<td class='delete-cell'>");else{var d=i.list.find(i.itemSelector+":last");d.length>0?d.after(t):i.list.prepend(t)}var o=e(i.itemSelector+":last",i.list),r=n.getIndexName(i.htmlFieldPrefix,i.property);n.appendRemoveAndIndex(o,a,r,i),e.validator&&e.validator.unobtrusive&&e.validator.unobtrusive.parseDynamicContent&&e.validator.unobtrusive.parseDynamicContent(o),i.itemAdded&&i.itemAdded(o),i.addButton.prop("disabled",!1)}).error(function(e){401===e.status&&alert("Your session has timed out. Please refresh the page and try again.")})},appendRemoveAndIndex:function(t,i,a,d){var o=n.parseTemplate("removeItem",d),r='<input type="hidden" name="'+a+'" class="index" value="'+i+'" />',l=o+r;"table"===d.listType?t.find("td.delete-cell").append(l):t.append(l),e(".delete-item",t).click(function(){t.remove(),d.itemRemoved&&d.itemRemoved(t)})},getBaseItemPrefix:function(e,t){var n=e;return""!==n&&(n+="."),n+=t},getNewItemPrefix:function(e,t,i){return n.getBaseItemPrefix(e,t)+"["+i+"]"},getIndexName:function(e,t){return n.getBaseItemPrefix(e,t)+".Index"},getNewIndex:function(t,n){var i=e(n,t);if(0===i.length)return 0;var a=0;return i.each(function(){var t=parseInt(e("input.index",e(this)).val());isNaN(t)&&(t=0),a=Math.max(a,t)}),a+1},getTemplate:function(e,t){return t.templates[t.listType][e]},parseTemplate:function(e,t){var i=n.getTemplate(e,t);return Object.keys(t).forEach(function(e){i=i.replace("{"+e+"}",t[e]||"")}),i}},i={init:function(t){return t=e.extend({},e.fn.dynamiclist.defaults,t),this.each(function(){var i=e(this),a=i.data("dynamiclist");if(t.list=i,!a){i.wrap(n.parseTemplate("container",t)),i.addClass("dynamic-list"),t.selector=i.selector,"table"===t.listType&&(e("thead tr",i).append("<th></th>"),e("tbody tr",i).append("<td class='delete-cell'></td>"),e("tfoot tr",i).append("<td></td>")),e(t.itemSelector,i).each(function(i){var a=n.getIndexName(t.htmlFieldPrefix,t.property);n.appendRemoveAndIndex(e(this),i,a,t)});var d=n.parseTemplate("addItem",t);if("table"===t.listType){var o=i.find("thead td, thead th").length,r=i.find("tfoot");0===r.length&&(i.append("<tfoot></tfoot>"),r=i.find("tfoot")),r.append('<tr><td colspan="'+o+'">'+d+"</td></tr>")}else i.append(d);var l=t.addButton=i.find(".add-item");l.click(function(e){n.addItem(e,t)}),i.data("dynamiclist",t),t.itemAdded&&i.each(function(e,n){$(n).each(function(e,n){t.itemAdded(n)})})}})},options:function(t){return this.each(function(){var n=e(this),i=n.data("dynamiclist")||{};t=e.extend({},i,t),n.dynamiclist("destroy").dynamiclist("init",t)})},add:function(){return this.each(function(){var t=e(this);t.find(".add-item").click()})},destroy:function(){return this.each(function(){var t=e(this);t.removeData("dynamiclist")})}};e.fn.dynamiclist=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.dynamiclist"):i.init.apply(this,arguments)},e.fn.dynamiclist.defaults={uiType:"undefined"!=typeof e.fn.button&&e.fn.button.Constructor&&e.fn.button.Constructor.VERSION?t.bootstrap:t.kendo,itemSelector:".item",addLabel:"Add",removeLabel:"Remove",htmlFieldPrefix:"",property:"Items",newItemUrl:"NewItem",listType:"list",itemAdded:function(e){},itemRemoved:function(e){},templates:{table:{container:"<div class='dynamic-list-container'></div>",addItem:'<div class="add-item-container"><button class="add-item">{addLabel}</button></div>',removeItem:'<button type="button" class="delete-item">{removeLabel}</button>'},list:{container:"<div class='dynamic-list-container'></div>",addItem:'<li class="add-item-container"><button class="add-item">{addLabel}</button></li>',removeItem:'<button type="button" class="delete-item">{removeLabel}</button>'},div:{container:"<div class='dynamic-list-container'></div>",addItem:'<div class="add-item-container"><button class="add-item">{addLabel}</button></div>',removeItem:'<button type="button" class="delete-item">{removeLabel}</button>'}}}}(jQuery);
//# sourceMappingURL=jquery.dynamiclist.min.js.map